class DominityElement{constructor(e){if("string"==typeof e?this.elem=document.querySelector(e):this.elem=e,null==this.elem){console.error(`DominityError: element of query '${e}'  NOT  FOUND `);return}this.dominityElem=!0,this.tag=this.elem.tagName,this.template=!1}text(e=null){return null==e?this.elem.textContent:(this.template||(this.template=e),this.elem.textContent=e,this)}reactTo(...e){let t=this.html();return e.forEach(e=>{e.subscribe(s=>{"object"!=typeof s.value?this.text(t.replace(RegExp("{{"+e.name+"}}","gi"),s.value)):Object.keys(s.value).forEach(r=>{this.html(t.replace(RegExp("{{"+e.name+"."+r+"}}","gi"),s.value[r])),t=this.html()})}),e.update()}),this}html(e=null){return null==e?this.elem.innerHTML:(this.elem.innerHTML=e,this)}code(e=null){return null==e?this.elem.outerHTML:(this.elem.outerHTML=e,this)}addText(e=""){return this.elem.textContent+=e,this}addHtml(e=""){return this.elem.innerHTML+=e,this}addCode(e=""){return this.elem.outerHTML+=e,this}insertHtml(e,t){return this.elem.insertAdjacentHTML(e,t),this}insertTxt(e,t){return this.elem.insertAdjacentText(e,t),this}style(e,t=null){if("string"==typeof e)return null==t?window.getComputedStyle(this.elem,null).getPropertyValue(e):(this.elem.style[e]=t,this);if("object"==typeof e){let s=Object.keys(e),r=Object.values(e);return s.forEach((e,t)=>{this.style(e,r[t]+"")}),this}}class(){return Array.from(arguments).forEach(e=>{this.elem.classList.add(e)}),this}removeClass(){return Array.from(arguments).forEach(e=>{this.elem.classList.remove(e)}),this}toggleClass(){return Array.from(arguments).forEach(e=>{this.elem.classList.toggle(e)}),this}hasClass(e){return this.elem.classList.contains(e)}getClass(e=0){return this.elem.classList.item(e)}attr(e,t=null){if("string"==typeof e)return null==t?this.elem.getAttribute(e):(this.elem.setAttribute(e,t),this);if("object"==typeof e){let s=Object.keys(e),r=Object.values(e);return s.forEach((e,t)=>{this.attr(e,r[t])}),this}}hasAttr(e=null){return null!=e?this.elem.hasAttribute(e):null==e?this.elem.hasAttributes():void 0}removeAttr(){Array.from(arguments).forEach(e=>{this.elem.removeAttribute(e)})}toggleAttr(e,t=""){return this.hasAttr(e)?this.removeAttr(e):this.attr(e,t),this}value(e=null){if(null==e)return this.elem.value;this.elem.value=e}checkFor(e,t,s){return this.elem.addEventListener(e,t,s),this}stopCheckFor(e,t,s){return this.elem.removeEventListener(e,t,s),this}causeEvent(e){return this.elem.dispatchEvent(e),this}onClick(e){return this.checkFor("click",t=>{e(this,t)}),this}onClickOut(e){document.addEventListener("click",e=>{e.target,this.elem})}enableHold(e=.5){this.isHolding=!1;let t=this;function s(s){this.isHolding=!0,this.timeout=setTimeout(e=>{this.isHolding&&t.causeEvent(new CustomEvent("hold",{details:e}))},1e3*e)}function r(e){this.isHolding=!1,clearTimeout(this.timeout)}return this.checkFor("mousedown",s),this.checkFor("touchstart",s),this.checkFor("mouseup",r),this.checkFor("touchend",r),this}addTo(e){return e.dominityElem?e.addChild(this):e.appendChild(this.elem),this}insertTo(e,t){null!=e&&(e.dominityElem?e.insertChild(t,this.elem):e.insertAdjacentElement(t,this.elem))}remove(){return this.elem.remove(),this}_el(e,t="",s={}){return e.dominityElem?(this.addChild(e),e):"object"==typeof t?this.create(e).attr(t):this.create(e).text(t).attr(s)}create(e){return this.addedChild=create(e),this.addChild(this.addedChild),this.addedChild}addChild(){return Array.from(arguments).forEach(e=>{e.dominityElem?this.elem.appendChild(e.elem):this.elem.appendChild(e)}),this}insertChild(e,t){return this.elem.insertAdjacentElement(e,t),this}removeChild(){return Array.from(arguments).forEach(e=>{this.elem.removeChild(this.elem.childNodes[e])}),this}replaceChild(e,t){return this.elem.replaceChild(t,e),this}getChild(e){return new DominityElement(this.elem.querySelector(e))}getChildren(e){return Array.from(this.elem.querySelectorAll(e)).map(e=>new DominityElement(e))}child(e){return new DominityElement(this.elem.children[e])}parent(){return new DominityElement(this.elem.parentNode)}firstParent(e="body"){let t="";for(;t!=$el(e);)t=this.elem.parentNode;return new DominityElement(t)}$end(){return this.parent()}next(){return new DominityElement(this.elem.nextElementSibling)}previous(){return new DominityElement(this.elem.previousElementSibling)}clone(e=!0){return new DominityElement(this.elem.cloneNode(e))}cloneContent(e=!0){return new DominityElement(this.elem.content.cloneNode(e))}asComponent(){return this.cloneContent()}closest(e){return new DominityElement(this.elem.closest(e))}contains(e){return e.dominityElem?this.elem.contains(e.elem):this.elem.contains(e)}matches(e){return"string"==typeof e?this.elem.matches(e):"object"==typeof e?e.dominityElem?e===this:e===this.elem:void 0}hide(){return this.style("display","none"),this}show(e="block"){return this.style("display",e),this}toggleHide(e,t){return"none"==this.style("display")?(this.show(),void 0!=e&&e(this)):"none"!=this.style("display")&&(this.hide(),void 0!=t&&t(this)),this}showIf(e,t){let s=this;return e instanceof reactive?(e.subscribe(e=>{let r=e.value;t&&(r=t(e.value)),s.showIf(r)}),e.update(),this):(e?this.show():this.hide(),this)}loops(e,t){let s=this;return e instanceof reactive?(e.subscribe(e=>{s.html(""),e.value.forEach((e,r)=>{t(e,s,r)})}),e.update(),this):(console.error("DominityError: list item for ._elFor has to be a reactive object made with reactable("),this)}model(e){let t="value";return"checkbox"==this.attr("type")&&(t="checked"),e instanceof reactive?(e.subscribe(e=>{this.elem[t]=e.value}),e.update(),this.checkFor("input",()=>{let s=this.value();"number"==this.attr("type")&&(""==s&&(s="0"),s=parseFloat(s)),"checked"==t&&(s=!!this.elem.checked),e.set(s)})):(this.attr(t,e),this.checkFor("input",()=>{e="checked"==t?this.elem.checked:this.value()})),this}binder(e,t){t instanceof reactive&&(t.subscribe(t=>{this.attr(e,t.value)}),t.update())}focus(e=!0){return!0==e?this.elem.focus():!1==e&&this.elem.blur(),this}click(){return this.elem.click(),this}scrollTo(e=!0){return this.elem.scrollIntoView(e),this}getScrollInfo(){return{height:this.elem.scrollHeight,width:this.elem.scrollWidth,x:this.elem.scrollLeft,y:this.elem.scrollTop}}getSizeInfo(){return this.elem.getBoundingClientRect()}fullScreen(e=!0){return!0==e?this.elem.requestFullScreen?this.elem.requestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullScreen&&this.elem.msRequestFullscreen():this.elem.exitFullScreen?this.elem.exitFullScreen():this.elem.webkitExitFullscreen?this.elem.webkitExitFullscreen():this.elem.msExitFullScreen&&this.elem.msExitFullscreen(),this}}class finderAll{constructor(e){return this.elemArr=[],document.querySelectorAll(e).forEach(e=>{this.elemArr.push(new DominityElement(e))}),this.elemArr}}function create(e,t=!0,s=document.body){let r=document.createElement(e);return t&&s.appendChild(r),new DominityElement(r)}function el(e,t="",s={},r=document.body){return"object"==typeof t?create(e,!0,r).attr(t):create(e,!0,r).text(t).attr(s)}function $el(e){return new DominityElement(e)}function $$el(e){let t=[];return document.querySelectorAll(e).forEach(e=>{t.push(new DominityElement(e))}),t}function repeat(e,t,s=1,r=.07){let l=0,n=setInterval(()=>{l<=t?(e(),l+=s):clearInterval(n)},1e3*r)}function range(e,t,s=1){let r=[];if("string"==typeof e&&"string"==typeof t){for(i=e.charCodeAt(0)-96;i<t.charCodeAt(0)-96+1;i+=s)r.push(i);return r.map(e=>String.fromCharCode(96+e))}if("number"==typeof e&&"number"==typeof t){for(i=e;i<t+1;i+=s)r.push(i);return r}}function random(e,t=0){return Array.isArray(e)?e[Math.floor(Math.random()*(e.length-t))+t]:Math.floor(Math.random()*(e-t))+t}function copy(e,t){if(navigator.clipboard)navigator.clipboard.writeText(e).then(t);else{let s=create("input");s.value(e),s.elem.select(),s.elem.setSelectionRange(0,99999),document.execCommand("copy"),s.remove(),t()}}class reactive{constructor(e){this.value=e,this.subscribers=[],this.name="",this.linkLess=[]}as(e){return this.name=e,this}subscribe(e,t=!1){this.subscribers.push(e),t||this.linkLess.push(e),e(this)}unsubscribe(e){this.subscribers.pop(subscribers.indexOf(e))}set(e){this.value=e,this.update()}get(e=""){return""!=e?this.value[e]:this.value}setProp(e,t){this.value[e]=t,this.update()}deriveFrom(e,t){return e instanceof reactive?(e.subscribe(()=>{this.set(t(e.value))}),this):e instanceof Array?(e.forEach(e=>{e.subscribe(()=>{this.set(t(e.value))})}),this):void 0}link(e,t,s){e.subscribe(()=>{this.linkMsg(s(e.value))},!0);let r=s=>{e.linkMsg(t(s.value))};return this.subscribe(r,!0),this}linkMsg(e){this.value=e,this.update("linkLess")}update(e="subscribers"){this[e].forEach(e=>{e(this)})}}function reactable(e){return new reactive(e)}class DominityRouter{constructor(){this.path=this.getPath(),this.defaultPath="",this.defaultFile="/index.html",this.routes=[],this.firstLoad=0,this.backHandler=async()=>{this.firstLoad&&this.getPath()!=this.defaultFile?await this.handleRoute():(this.replaceRoute(this.defaultPath),this.firstLoad=1)},addEventListener("popstate",this.backHandler),addEventListener("load",this.backHandler)}register(e,t,s=()=>{}){let r={route:e,elem:t,callback:s,routeKey:reactable(!1)};return this.routes.push(r),t.showIf(r.routeKey),this}getPath(){return window.location.pathname}async handleRoute(){let e=0;this.routes.forEach(t=>{this.getPath()==t.route?(t.routeKey.set(!0),e=1):t.routeKey.set(!1),e||this.replaceRoute("/404")})}routeTo(e){history.pushState(null,"",e),this.handleRoute()}replaceRoute(e){history.replaceState(null,"",e),this.handleRoute()}}
