class DominityElement{constructor(t){if("string"==typeof t?this.elem=document.querySelector(t):this.elem=t,null==this.elem){console.error(`DominityError: element of query '${t}'  NOT  FOUND `);return}this.dominityElem=!0,this.childCount=this.elem.childElementCount,this.tag=this.elem.tagName,this.template=!1}text(t=null){return null==t?this.elem.textContent:(this.template||(this.template=t),this.elem.textContent=t,this)}reactTo(...t){let s=this.html();return t.forEach(t=>{t.subscribe(r=>{"object"!=typeof r.value?this.text(s.replace(RegExp("{{"+t.name+"}}","gi"),r.value)):Object.keys(r.value).forEach(l=>{this.html(s.replace(RegExp("{{"+t.name+"."+l+"}}","gi"),r.value[l])),s=this.html()})}),t.update()}),this}html(t=null){return null==t?this.elem.innerHTML:(this.elem.innerHTML=t,this)}code(t=null){return null==t?this.elem.outerHTML:(this.elem.outerHTML=t,this)}addText(t=""){return this.elem.textContent+=t,this}addHtml(t=""){return this.elem.innerHTML+=t,this}addCode(t=""){return this.elem.outerHTML+=t,this}insertHtml(t,s){return this.elem.insertAdjacentHTML(t,s),this}insertTxt(t,s){return this.elem.insertAdjacentText(t,s),this}style(t,s=null){if("string"==typeof t)return null==s?window.getComputedStyle(this.elem,null).getPropertyValue(t):(this.elem.style[t]=s,this);if("object"==typeof t){let r=Object.keys(t),l=Object.values(t);return r.forEach((t,s)=>{this.style(t,l[s]+"")}),this}}class(){return Array.from(arguments).forEach(t=>{this.elem.classList.add(t)}),this}removeClass(){return Array.from(arguments).forEach(t=>{this.elem.classList.remove(t)}),this}toggleClass(){return Array.from(arguments).forEach(t=>{this.elem.classList.toggle(t)}),this}hasClass(t){return this.elem.classList.contains(t)}getClass(t=0){return this.elem.classList.item(t)}attr(t,s=null){if("string"==typeof t)return null==s?this.elem.getAttribute(t):(this.elem.setAttribute(t,s),this);if("object"==typeof t){let r=Object.keys(t),l=Object.values(t);return r.forEach((t,s)=>{this.attr(t,l[s])}),this}}hasAttr(t=null){return null!=t?this.elem.hasAttribute(t):null==t?this.elem.hasAttributes():void 0}removeAttr(){Array.from(arguments).forEach(t=>{this.elem.removeAttribute(t)})}toggleAttr(t,s=""){return this.hasAttr(t)?this.removeAttr(t):this.attr(t,s),this}value(t=null){if(null==t)return this.elem.value;this.elem.value=t}checkFor(t,s,r){return this.elem.addEventListener(t,s,r),this}stopCheckFor(t,s,r){return this.elem.removeEventListener(t,s,r),this}causeEvent(t){return this.elem.dispatchEvent(t),this}onClick(t){return this.checkFor("click",s=>{t(this,s)}),this}onClickOut(t){document.addEventListener("click",t=>{t.target,this.elem})}enableHold(t=.5){this.isHolding=!1;let s=this;function r(r){this.isHolding=!0,this.timeout=setTimeout(t=>{this.isHolding&&s.causeEvent(new CustomEvent("hold",{details:t}))},1e3*t)}function l(t){this.isHolding=!1,clearTimeout(this.timeout)}return this.checkFor("mousedown",r),this.checkFor("touchstart",r),this.checkFor("mouseup",l),this.checkFor("touchend",l),this}enableSwipe(t=50){this.isSwiping=!1;let s,r,l,n;function h(t){t.preventDefault(),this.isSwiping=!0,"touchstart"===t.type?(s=t.touches[0].clientX,r=t.touches[0].clientY):"mousedown"===t.type&&(s=t.clientX,r=t.clientY)}function o(t){this.isSwiping&&("touchmove"===t.type?(l=t.touches[0].clientX,n=t.touches[0].clientY):"mousemove"===t.type&&(l=t.clientX,n=t.clientY))}let c=this;function u(m){if(!this.isSwiping)return;this.isSwiping=!1;let a=l-s,d=n-r,f=Math.sqrt(a**2+d**2),p;if(p=Math.abs(a)>Math.abs(d)?a>0?"right":"left":d>0?"down":"up",f>=t){let y=new CustomEvent("swipe",{direction:p,distance:f});c.dispatchEvent(y)}c.checkFor("touchstart",()=>{h(e)}),c.checkFor("touchmove",()=>{o(e)}),c.checkFor("touchend",()=>{u(e)}),c.checkFor("mousedown",h),c.checkFor("mousemove",o),c.checkFor("mouseup",u)}return this}addTo(t){return t.dominityElem?t.addChild(this):t.appendChild(this.elem),this}insertTo(t,s){null!=t&&(t.dominityElem?t.insertChild(s,this.elem):t.insertAdjacentElement(s,this.elem))}remove(){return this.elem.remove(),this}_el(t,s="",r={}){return"object"==typeof s?this.create(t).attr(s):this.create(t).text(s).attr(r)}create(t){return this.addedChild=create(t),this.addChild(this.addedChild),this.addedChild}addChild(){return Array.from(arguments).forEach(t=>{t.dominityElem?this.elem.appendChild(t.elem):this.elem.appendChild(t)}),this}insertChild(t,s){return this.elem.insertAdjacentElement(t,s),this}removeChild(){return Array.from(arguments).forEach(t=>{this.elem.removeChild(this.elem.childNodes[t])}),this}replaceChild(t,s){return this.elem.replaceChild(s,t),this}getChild(t){return new DominityElement(this.elem.querySelector(t))}getChildren(t){return Array.from(this.elem.querySelectorAll(t)).map(t=>new DominityElement(t))}child(t){return new DominityElement(this.elem.children[t])}parent(){return new DominityElement(this.elem.parentNode)}firstParent(t="body"){let s="";for(;s!=$el(t);)s=this.elem.parentNode;return new DominityElement(s)}$end(){return this.parent()}next(){return new DominityElement(this.elem.nextElementSibling)}previous(){return new DominityElement(this.elem.previousElementSibling)}clone(t=!0){return new DominityElement(this.elem.cloneNode(t))}cloneContent(t=!0){return new DominityElement(this.elem.content.cloneNode(t))}closest(t){return new DominityElement(this.elem.closest(t))}contains(t){return t.dominityElem?this.elem.contains(t.elem):this.elem.contains(t)}matches(t){return"string"==typeof t?this.elem.matches(t):"object"==typeof t?t.dominityElem?t===this:t===this.elem:void 0}hide(){return this.style("display","none"),this}show(t="block"){return this.style("display",t),this}toggleHide(t,s){return"none"==this.style("display")?(this.show(),void 0!=t&&t(new DominityElement(this.elem))):"none"!=this.style("display")&&(this.hide(),void 0!=s&&s(new DominityElement(this.elem))),this}showIf(t){let s=this;return t instanceof reactive?(t.subscribe(t=>{s.showIf(t.value)}),t.update(),this):(t?this.show():this.hide(),this)}loops(t,s){let r=this;return t instanceof reactive?(t.subscribe(t=>{r.html(""),t.value.forEach((t,l)=>{s(t,r,l)})}),t.update(),this):(console.error("DominityError: list item for ._elFor has to be a reactive object made with reactable("),this)}model(t){let s="value";return"checkbox"==this.attr("type")&&(s="checked"),t instanceof reactive?(t.subscribe(t=>{this.elem[s]=t.value}),t.update(),this.checkFor("input",()=>{let r=this.value();"number"==this.attr("type")&&(""==r&&(r="0"),r=parseFloat(r)),"checked"==s&&(r=!!this.elem.checked),t.set(r)})):(this.attr(s,t),this.checkFor("input",()=>{t="checked"==s?this.elem.checked:this.value()})),this}binder(t,s){s instanceof reactive&&(s.subscribe(s=>{this.attr(t,s.value)}),s.update())}focus(t=!0){return!0==t?this.elem.focus():!1==t&&this.elem.blur(),this}click(){return this.elem.click(),this}scrollTo(t=!0){return this.elem.scrollIntoView(t),this}getScrollInfo(){return{height:this.elem.scrollHeight,width:this.elem.scrollWidth,x:this.elem.scrollLeft,y:this.elem.scrollTop}}getSizeInfo(){return this.elem.getBoundingClientRect()}fullScreen(t=!0){return!0==t?this.elem.requestFullScreen?this.elem.requestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullScreen&&this.elem.msRequestFullscreen():this.elem.exitFullScreen?this.elem.exitFullScreen():this.elem.webkitExitFullscreen?this.elem.webkitExitFullscreen():this.elem.msExitFullScreen&&this.elem.msExitFullscreen(),this}}class finderAll{constructor(t){return this.elemArr=[],document.querySelectorAll(t).forEach(t=>{this.elemArr.push(new DominityElement(t))}),this.elemArr}}function create(t,s=!0,r=document.body){return this.element=document.createElement(t),s&&r.appendChild(this.element),new DominityElement(this.element)}function el(t,s="",r={}){return"object"==typeof s?create(t).attr(s):create(t).text(s).attr(r)}function $el(t){return new DominityElement(t)}function $$el(t){return new finderAll(t)}function repeat(cd,limit,jump=1,ti=.07){this.cnt=1,this.cntrl="this.cnt+="+jump,this.code="()=>{"+cd+";if(this.cnt>="+limit+"){clearInterval(this.inter)}else{"+this.cntrl+"}}",this.inter=setInterval(eval(this.code),1e3*ti)}function range(t,s,r=1){let l=[];if("string"==typeof t&&"string"==typeof s){for(i=t.charCodeAt(0)-96;i<s.charCodeAt(0)-96+1;i+=r)l.push(i);return l.map(t=>String.fromCharCode(96+t))}if("number"==typeof t&&"number"==typeof s){for(i=t;i<s+1;i+=r)l.push(i);return l}}function random(t,s=0){return Array.isArray(t)?t[Math.floor(Math.random()*(t.length-s))+s]:Math.floor(Math.random()*(t-s))+s}function copy(t){let s=create("input");s.val(t),s.elem.select(),s.elem.setSelectionRange(0,99999),document.execCommand("copy"),s.remove()}class reactive{constructor(t){this.value=t,this.subscribers=[],this.name=""}as(t){return this.name=t,this}subscribe(t){this.subscribers.push(t)}unsubscribe(t){this.subscribers.pop(subscribers.indexOf(t))}set(t){this.value=t,this.update()}get(t=""){return""!=t?this.value[t]:this.value}setProp(t,s){this.value[t]=s,this.update()}deriveFrom(t,s){return t instanceof reactive?(t.subscribe(()=>{this.set(s(t.value))}),t.update(),this):t instanceof Array?(t.forEach(t=>{t.subscribe(()=>{this.set(s(t.value))}),t.update()}),this):void 0}update(){this.subscribers.forEach(t=>{t(this)})}}function reactable(t){return new reactive(t)}
